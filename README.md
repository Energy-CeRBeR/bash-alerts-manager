# Alert Manager

Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð° Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð² Ð´Ð»Ñ Ubuntu Ñ Ð½Ð°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ð¼Ð¸ Ð°Ð»ÐµÑ€Ñ‚Ð°Ð¼Ð¸

## Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

- ðŸ–¥ï¸ **ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ CPU** - Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ñ€Ð°
- ðŸ’¾ **ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ RAM** - ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¸Ð²Ð½Ð¾Ð¹ Ð¿Ð°Ð¼ÑÑ‚Ð¸  
- ðŸ’¿ **ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð´Ð¸ÑÐºÐ°** - Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¼ÐµÑÑ‚Ð°
- ðŸ”„ **ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð²** - Ð¿Ð¾Ð´ÑÑ‡ÐµÑ‚ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð° Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð²
- ðŸ“ **ÐšÑ€Ð°ÑÐ¸Ð²Ñ‹Ðµ Ð»Ð¾Ð³Ð¸** - Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ñ‹Ðµ Ð°Ð»ÐµÑ€Ñ‚Ñ‹ Ñ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð¼ÐµÑ‚ÐºÐ°Ð¼Ð¸
- âš™ï¸ **ÐÐ°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ðµ Ð¿Ð¾Ñ€Ð¾Ð³Ð¸** - Ð³Ð¸Ð±ÐºÐ°Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· Ñ„Ð°Ð¹Ð»
- ðŸ• **ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð·Ð°Ð¿ÑƒÑÐº** - Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ cron
- ðŸ§ª **Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼** - Ð½Ð¸Ð·ÐºÐ¸Ðµ Ð¿Ð¾Ñ€Ð¾Ð³Ð¸ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹

## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```bash
alert-manager/
â”œâ”€â”€ alert-manager.conf         # ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð»
â”œâ”€â”€ alert-manager.sh           # Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð·Ð°Ð¿ÑƒÑÐºÐ°
â”œâ”€â”€ README.md                  # Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ
â”œâ”€â”€ scripts/                   # Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ Ð´Ð»Ñ Ð²ÑÐµÑ… ÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð²
â”‚   â”œâ”€â”€ install.sh             # Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸
â”‚   â”œâ”€â”€ uninstall.sh           # Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ
â”‚   â”œâ”€â”€ test_runner.sh         # Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº
â”‚   â”œâ”€â”€ alert-manager.sh       # ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³
â”‚   â”œâ”€â”€ utils/                 # Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ logger.sh          # Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
â”‚   â”‚   â”œâ”€â”€ config_parser.sh   # ÐŸÐ°Ñ€ÑÐµÑ€ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
â”‚   â”‚   â”œâ”€â”€ system_info.sh     # Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ
â”‚   â”‚   â””â”€â”€ alert_formatter.sh # Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð°Ð»ÐµÑ€Ñ‚Ð¾Ð²
â”‚   â”œâ”€â”€ observability/         # ÐœÐ¾Ð´ÑƒÐ»Ð¸ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°
â”‚   â”‚   â”œâ”€â”€ cpu_monitor.sh     # ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ CPU
â”‚   â”‚   â”œâ”€â”€ ram_monitor.sh     # ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ RAM
â”‚   â”‚   â”œâ”€â”€ disk_monitor.sh    # ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð´Ð¸ÑÐºÐ°
â”‚   â”‚   â””â”€â”€ process_monitor.sh # ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð²
â”‚   â””â”€â”€ alerts/                # Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð°Ð»ÐµÑ€Ñ‚Ð¾Ð²
â”‚       â””â”€â”€ file_alert.sh      # Ð¤Ð°Ð¹Ð»Ð¾Ð²Ñ‹Ðµ Ð°Ð»ÐµÑ€Ñ‚Ñ‹
â””â”€â”€ alerts.log                 # Ð¤Ð°Ð¹Ð» Ñ Ð»Ð¾Ð³Ð°Ð¼Ð¸
```

# Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

## ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

**Ð•ÑÐ»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚Ðµ `wsl`, Ñ‚Ð¾ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ**:

```powershell
wsl
```

**Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð½ÑƒÐ¶Ð½Ñ‹Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸**:

```bash
sudo apt update && sudo apt upgrade -y
sudo apt install -y bc cron procps coreutils
```

## ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ

```bash
git clone https://github.com/Energy-CeRBeR/bash-alerts-manager.git
cd bash-alerts-manager
```

## Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð½ÑƒÐ¶Ð½Ñ‹Ñ… Ð¿Ñ€Ð°Ð² Ð´Ð»Ñ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð°

```bash
chmod +x alert-manager.sh
find scripts/ -name "*.sh" -exec chmod +x {} \;
```

**ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°:**

ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° `./alert-manager.sh status` Ð½Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð²Ñ‹Ð´Ð°Ð²Ð°Ñ‚ÑŒ `-bash: ./alert-manager.sh: Permission denied`

## ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð´ ÑÐµÐ±Ñ `alert-manager.conf`:

## ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹

```bash
./alert-manager.sh run        # Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð·
./alert-manager.sh install    # Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ cron job
./alert-manager.sh uninstall  # Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ cron job
./alert-manager.sh status     # ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ
./alert-manager.sh test       # Ð¢ÐµÑÑ‚ Ñ Ð½Ð¸Ð·ÐºÐ¸Ð¼Ð¸ Ð¿Ð¾Ñ€Ð¾Ð³Ð°Ð¼Ð¸
./alert-manager.sh summary    # Ð¡Ð²Ð¾Ð´ÐºÐ° Ð¿Ð¾ Ð°Ð»ÐµÑ€Ñ‚Ð°Ð¼
./alert-manager.sh help       # Ð¡Ð¿Ñ€Ð°Ð²ÐºÐ°
```

## ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð°Ð»ÐµÑ€Ñ‚Ð¾Ð²

```
ðŸš¨ ALERT TRIGGERED ðŸš¨
=====================

Timestamp: 2024-01-15 14:30:25
Alert Type: HIGH CPU USAGE
Current Value: 85.5%
Threshold: 80%
Status: CRITICAL

CPU Details
-----------

CPU Model: Intel(R) Core(TM) i7-8700K CPU @ 3.70GHz
CPU Cores: 8
Load Average: 2.45, 1.89, 1.23

Top CPU Processes:
  PID  CPU  MEM  COMMAND
  1234 25.5 12.3 chrome
  5678 15.2 8.7  node
=====================
```

## Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸

### Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ñ‹Ñ… Ñ‚Ð¸Ð¿Ð¾Ð² Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°

1. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð² `scripts/observability/`
2. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð² `alert-manager.conf`
3. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ `scripts/alert-manager.sh`

### Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ñ‹Ñ… ÑÐ¿Ð¾ÑÐ¾Ð±Ð¾Ð² ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹

1. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð² `scripts/alerts/`
2. Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ `scripts/alerts/file_alert.sh`

## Ð—Ð°Ð¿ÑƒÑÐº ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° Ð¿Ð¾ ÐºÑ€Ð¾Ð½Ñƒ

> Ð’ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ...
